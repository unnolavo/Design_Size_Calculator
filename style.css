// --- ELEMENT REFERENCES ---
const unitSelect = document.getElementById("unitSelect");
const labelA = document.getElementById("labelA");
const labelS = document.getElementById("labelS");
const labelE = document.getElementById("labelE");
const resultBox = document.getElementById("result");
const instructionText = document.getElementById("instructionText");

// --- UPDATE LABEL UNITS ---
function updateLabels(unit) {
  // Known Measure labels
  labelA.textContent = `Known Real-Life Length (${unit}):`;
  labelS.textContent = `Corresponding On-Screen Length (${unit}):`;

  // Unknown Measure label — UPDATED
  labelE.textContent = `On-Screen Length in Question (${unit}):`;
}

// --- UNIT SELECTOR LISTENER ---
unitSelect.addEventListener("change", () => {
  const unit = unitSelect.value;
  updateLabels(unit);
  updateInstructions(unit);
});

// --- UPDATE INSTRUCTIONS TEXT (dynamic) ---
function updateInstructions(unit) {
  instructionText.innerHTML = `
    <p>
      Enter a known measurement from the real-life product and the matching 
      measurement from your on-screen view. The tool will use this scale to 
      estimate the true size of any other on-screen measurement.
    </p>
    <p><strong>Units selected:</strong> ${unit}</p>
  `;
}

// --- CALCULATION ---
document.getElementById("calcForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const real = parseFloat(document.getElementById("actual").value);
  const screenKnown = parseFloat(document.getElementById("screen").value);
  const screenUnknown = parseFloat(document.getElementById("element").value);

  if (real > 0 && screenKnown > 0 && screenUnknown > 0) {
    const ratio = real / screenKnown;
    const estimated = ratio * screenUnknown;
    resultBox.textContent = estimated.toFixed(3);
  } else {
    resultBox.textContent = "–";
  }
});

// --- COLLAPSIBLE INSTRUCTIONS ---
function toggleInstructions() {
  const content = document.getElementById("instructionText");
  content.style.display = content.style.display === "block" ? "none" : "block";
}

// --- INITIAL LOAD ---
updateLabels(unitSelect.value);
updateInstructions(unitSelect.value);
